<link rel="import" href="vaadin-grid-header-row.html">

<dom-module id="vaadin-grid-header">
  <script>
    Polymer({
      is: 'vaadin-grid-header',
      extends: 'thead',

      properties: {
        columns: Array,
        frozenColumns: Number,
        rowCount: {
          type: Number,
          value: 1
        },
        _rows: Array
      },

      observers: ['_rowCountChanged(rowCount, columns)', '_frozenColumnsChanged(frozenColumns, _rows)'],

      _rowCountChanged: function(rowCount, columns) {
        var rows = this._rows || [];

        while (rows.length > rowCount) {
          var lastRow = rows.pop();
          Polymer.dom(this).removeChild(lastRow);
        }

        while (rows.length < rowCount) {
          var row = document.createElement('tr', 'vaadin-grid-header-row');
          row.headerIndex = rows.length;
          row.target = this.domHost.domHost;
          row.columns = columns;

          rows.push(row);

          Polymer.dom(this).appendChild(row);
        }

        this._rows = rows.slice(0); // new array to make the observer trigger.
      },

      _frozenColumnsChanged: function(frozenColumns, rows) {
        rows.forEach(function(row) {
          row.frozenColumns = frozenColumns;
        })
      }
    });
  </script>
</dom-module>
