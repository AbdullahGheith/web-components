<dom-module id="row-details-styles">
  <template>
    <style>
      [detailscell] {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        background: #fff !important;
      }
    </style>
  </template>
</dom-module>

<script>
  window.vaadin = window.vaadin || {};
  vaadin.elements = vaadin.elements || {};
  vaadin.elements.grid = vaadin.elements.grid || {};

  vaadin.elements.grid.GridRowDetailsBehavior = {

    properties: {
      _expandedItems: {
        value: function() {
          return [];
        }
      }
    },

    observers: [
      '_expandedItemsChanged(_expandedItems.*)'
    ],

    _expandedItemsChanged: function(expandedItems) {
      this.$.scroller._update();
    },

    _isExpanded: function(item) {
      return this._expandedItems.indexOf(item) !== -1;
    },

    expandItem: function(item) {
      if (!this._isExpanded(item)) {
        this.push('_expandedItems', item);
      }
    },

    collapseItem: function(item) {
      if (this._isExpanded(item)) {
        this.splice('_expandedItems', this._expandedItems.indexOf(item), 1);
      }
    }

  };
</script>
