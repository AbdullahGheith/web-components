<script>
  window.vaadin = window.vaadin || {};
  vaadin.elements = vaadin.elements || {};
  vaadin.elements.grid = vaadin.elements.grid || {};

  vaadin.elements.grid.GridModelsBehaviorImpl = {
    /**
     * Assigns the data models to a given set of items.
     * @param {!Array<number>=} itemSet
     */
    _assignModels: function(itemSet) {
      this._iterateItems(function(pidx, vidx) {
        var el = this._physicalItems[pidx];
        el.childNodes.forEach(function(cell) {
          var inst = cell.instance;
          var item = this.items && this.items[vidx];

          if (item != null) {
            inst[this.as] = item;
            inst.__key__ = this._collection.getKey(item);
            inst[this.selectedAs] = /** @type {!ArraySelectorElement} */ (this.$.selector).isSelected(item);
            inst[this.indexAs] = vidx;
            // inst.tabIndex = this._focusedIndex === vidx ? 0 : -1;
            this._physicalIndexForKey[inst.__key__] = pidx;
            el.removeAttribute('hidden');
          } else {
            inst.__key__ = null;
            el.setAttribute('hidden', '');
          }
        }, this);
      }, itemSet);
    },
  };

  vaadin.elements.grid.GridModelsBehavior = [
    vaadin.elements.grid.GridModelsBehaviorImpl
  ];

</script>
