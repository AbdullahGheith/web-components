<!doctype html>
<html>

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">

  <title>vaadin-combo-box demo</title>

  <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
  <link rel="import" href="../../polymer/polymer.html">
  <link rel="import" href="../../paper-input/paper-input.html">
  <link rel="import" href="../vaadin-combo-box.html">

</head>

<body unresolved>

  <template is="dom-bind">
    <style is="custom-style">
      .horizontal {
        @apply(--layout-horizontal);
      }
    </style>

    <div class="horizontal">
      <vaadin-combo-box style="width: 60%" label="To" items="[[addresses]]"></vaadin-combo-box>
      <vaadin-combo-box style="width: 40%" label="Priority" items="[[priorities]]"></vaadin-combo-box>
    </div>


    <paper-input label="Subject"></paper-input>
    <textarea style="width: 100%; height: 200px;"></textarea>
    <button>Send</button>
  </template>

  <script>
    HTMLImports.whenReady(function() {
      var template = document.querySelector("template");

      template.priorities = ["High", "Medium", "Low"];

      template.addresses = function(req) {
        var filtered = [];
        if (req.filter) {
          ["@vaadin.com", "@gmail.com", "@yahoo.com"].forEach(function(suffix) {
            filtered.push(req.filter + suffix);
          });
          //History
          ["jouni@vaadin.com", "virkki@vaadin.com", "tepi@vaadin.com", "tuomas@vaadin.com"].forEach(function(addr) {
            var alreadyContains = filtered.filter(function(val){return val == addr}).length > 0;
            if (!alreadyContains && addr.indexOf(req.filter) === 0) {
              filtered.push(addr);
            }
          });
        }

        req.success(filtered.slice(req.index, req.index + req.count), filtered.length);
      };

    });
  </script>

</body>

</html>
